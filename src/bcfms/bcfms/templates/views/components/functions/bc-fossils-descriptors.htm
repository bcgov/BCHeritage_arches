{% load i18n %}

<div class="primary-descriptors-container">
    <!-- Nav tabs -->
    <ul class="nav nav-tabs card-nav-container" role="tablist">
        <li role="presentation" class="active"><a href="#primary-descriptors-name"
                                                  aria-controls="primary-descriptors-name" role="tab" data-toggle="tab">
            {% trans "Display Name" %}</a></li>
        <li role="presentation"><a href="#primary-descriptors-description"
                                   aria-controls="primary-descriptors-description" role="tab" data-toggle="tab"> {% trans "Display Description" %}</a></li>
        <li role="presentation"><a href="#primary-descriptors-map-popup" aria-controls="primary-descriptors-description"
                                   role="tab" data-toggle="tab">{% trans "Map Popup" %}</a></li>
        <li role="presentation" style="float:right; padding-right: 15px;"><a href="#reindex" aria-controls="reindex"
            role="tab" data-toggle="tab">{% trans "Re-Index" %}</a></li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane primary-descriptors-panel active" role="tabpanel" id="primary-descriptors-name">
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Node Names" %}</label>
                    </div>

                    <div class="col-xs-12">
                        <select data-placeholder="{% trans "Select a card from which to choose nodes to power your primary name identifier." %}"
                        multiple data-bind="selectedOptions: name.node_ids,
                        options: cards, optionsText: 'name', optionsValue: 'nodeid', chosen: {width: '100%',
                        allow_single_deselect: true, disable_search_threshold: 15}"></select>
                    </div>
                </div>
            </div>
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Show value title" %}</label>
                    </div>
                    <div class="col-xs-12">
                        <!--            <input type="checkbox" class="form-control input-lg widget-input" data-bind="checked: $parent.isOptionSelected(name.show_title)">-->
                        <span class="switch switch-small arches-switch"
                              data-bind="css: {'on': name.show_name()}, click: function(){name.show_name(!name.show_name())}, checked: name.show_name"><small></small></span>
                        {% trans 'Enable' %}
                    </div>

                </div>
                </div>
                <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Show only first value found" %}</label>
                    </div>
                    <div class="col-xs-12">
                        <!--            <input type="checkbox" class="form-control input-lg widget-input" data-bind="checked: $parent.isOptionSelected(name.show_title)">-->
                        <span class="switch switch-small arches-switch"
                              data-bind="css: {'on': name.first_only()}, click: function(){name.first_only(!name.first_only())}"><small></small></span>
                        {% trans 'Enable' %}
                    </div>

                    <div data-bind="visible:  !name.first_only()">
                        <div class="relative">
                            <label class="col-xs-12 control-label widget-input-label"> {% trans "Value delimiter" %}</label>
                        </div>

                        <div class="col-xs-6">
                            <input class="form-control input-lg widget-input" data-bind="textInput: name.delimiter">
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="tab-pane" role="tabpanel" id="primary-descriptors-description">
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Node Names" %}</label>
                    </div>

                    <div class="col-xs-12">
                        <select data-placeholder="{% trans "Select a card from which to choose nodes to power your primary description identifier." %}"
                        multiple data-bind="selectedOptions: description.node_ids,
                        options: cards, optionsText: 'name', optionsValue: 'nodeid', chosen: {width: '100%',
                        allow_single_deselect: true, disable_search_threshold: 15}"></select>
                    </div>
                </div>
            </div>
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Show value title" %}</label>
                    </div>
                    <div class="col-xs-12">
                        <span class="switch switch-small arches-switch"
                              data-bind="css: {'on': description.show_name()}, click: function(){description.show_name(!description.show_name())}, checked: description.show_name"><small></small></span>
                        {% trans 'Enable' %}
                    </div>

                </div>
            </div>
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Show only first value found" %}</label>
                    </div>
                    <div class="col-xs-12">
                        <span class="switch switch-small arches-switch"
                              data-bind="css: {'on': description.first_only()}, click: function(){description.first_only(!description.first_only())}"><small></small></span>
                        {% trans 'Enable' %}
                    </div>

                    <div data-bind="visible:  !description.first_only()">
                        <div class="relative">
                            <label class="col-xs-12 control-label widget-input-label"> {% trans "Value delimiter" %}</label>
                        </div>

                        <div class="col-xs-6">
                            <input class="form-control input-lg widget-input" data-bind="textInput: description.delimiter">
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="tab-pane" role="tabpanel" id="primary-descriptors-map-popup">
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Node Names" %}</label>
                    </div>

                    <div class="col-xs-12">
                        <select data-placeholder="{% trans "Select a card from which to choose nodes to power your map_popup description." %}"
                        multiple data-bind="selectedOptions: map_popup.node_ids,
                        options: cards, optionsText: 'name', optionsValue: 'nodeid', chosen: {width: '100%',
                        allow_single_deselect: true, disable_search_threshold: 15}"></select>
                    </div>
                </div>
            </div>
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Show value title" %}</label>
                    </div>
                    <div class="col-xs-12">
                        <span class="switch switch-small arches-switch"
                              data-bind="css: {'on': map_popup.show_name()}, click: function(){map_popup.show_name(!map_popup.show_name())}, checked: map_popup.show_name"><small></small></span>
                        {% trans 'Enable' %}
                    </div>

                </div>
            </div>
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <label class="col-xs-12 control-label widget-input-label"> {% trans "Show only first value found" %}</label>
                    </div>
                    <div class="col-xs-12">
                        <span class="switch switch-small arches-switch"
                              data-bind="css: {'on': map_popup.first_only()}, click: function(){map_popup.first_only(!map_popup.first_only())}"><small></small></span>
                        {% trans 'Enable' %}
                    </div>

                    <div data-bind="visible:  !map_popup.first_only()">
                        <div class="relative">
                            <label class="col-xs-12 control-label widget-input-label"> {% trans "Value delimiter" %}</label>
                        </div>

                        <div class="col-xs-6">
                            <input class="form-control input-lg widget-input" data-bind="textInput: map_popup.delimiter">
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="tab-pane" role="tabpanel" id="reindex">
            <div class="row widget-container">
                <div class="form-group">
                    <div class="relative">
                        <i class="fa fa-exclamation-triangle" style="color: #f75d3f;"></i><span class="control-label"> {% trans "If you've made any changes to this function and there are resources already in the system, then you will need to reindex the resources to reflect your changes.  This process can take some time (potentially several minuetes or more).  Please be patient." %}</span>
                    </div>

                    <div class="col-xs-12">
                        <a class="btn btn-sm btn-primary btn-labeled fa fa-refresh"
                           style="float: right;margin-top: 6px;margin-right: 6px;"
                           data-bind="visible: !loading(), click: reindexdb;">{% trans "Re-Index Resources Now" %}</a>
                        <a class="btn btn-primary" href="#"
                           style="float: right;margin-top: 6px;margin-right: 6px; padding:0px 5px 0px 0px;"
                           data-bind="visible: loading">
                            <i class="fa fa-spin fa-refresh" style="padding: 8px;"></i> {% trans "Re-Indexing..." %}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

